{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":67},"end":{"line":3,"column":56,"index":123}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"../services/socket","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":124},"end":{"line":4,"column":47,"index":171}}],"key":"Zr9DRnwDVZxHFeGDyPwyujLo6pk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _servicesSocket = require(_dependencyMap[3], \"../services/socket\");\n  var socketService = _interopDefault(_servicesSocket);\n  var useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    isAuthenticated: false,\n    isInitializing: true,\n    isSubmitting: false,\n    error: null,\n    login: function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (email, password) {\n        set({\n          isSubmitting: true,\n          error: null\n        });\n        try {\n          yield _servicesApi.authApi.login({\n            email,\n            password\n          });\n          var user = yield _servicesApi.authApi.getCurrentUser();\n\n          // Connect to WebSocket\n          var token = yield _servicesApi.tokenManager.getAccessToken();\n          if (user.tenant_id && token) {\n            socketService.default.connect(user.tenant_id, token);\n          }\n          set({\n            user,\n            isAuthenticated: true,\n            isSubmitting: false\n          });\n          return true;\n        } catch (error) {\n          var message = error.response?.data?.detail || 'Erreur de connexion';\n          set({\n            error: message,\n            isSubmitting: false\n          });\n          return false;\n        }\n      });\n      return function login(_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    logout: function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* () {\n        socketService.default.disconnect();\n        yield _servicesApi.authApi.logout();\n        set({\n          user: null,\n          isAuthenticated: false,\n          error: null\n        });\n      });\n      return function logout() {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    checkAuth: function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* () {\n        set({\n          isInitializing: true\n        });\n        try {\n          var token = yield _servicesApi.tokenManager.getAccessToken();\n          if (!token) {\n            set({\n              isInitializing: false,\n              isAuthenticated: false\n            });\n            return false;\n          }\n          var user = yield _servicesApi.authApi.getCurrentUser();\n\n          // Connect to WebSocket\n          if (user.tenant_id) {\n            socketService.default.connect(user.tenant_id, token);\n          }\n          set({\n            user,\n            isAuthenticated: true,\n            isInitializing: false\n          });\n          return true;\n        } catch (error) {\n          yield _servicesApi.tokenManager.clearTokens();\n          set({\n            user: null,\n            isAuthenticated: false,\n            isInitializing: false\n          });\n          return false;\n        }\n      });\n      return function checkAuth() {\n        return _ref3.apply(this, arguments);\n      };\n    }(),\n    clearError: () => set({\n      error: null\n    })\n  }));\n});","lineCount":125,"map":[[12,2,20,0,"Object"],[12,8,20,0],[12,9,20,0,"defineProperty"],[12,23,20,0],[12,24,20,0,"exports"],[12,31,20,0],[13,4,20,0,"enumerable"],[13,14,20,0],[14,4,20,0,"get"],[14,7,20,0],[14,18,20,0,"get"],[14,19,20,0],[15,6,20,0],[15,13,20,0,"useAuthStore"],[15,25,20,0],[16,4,20,0],[17,2,20,0],[18,2,80,4],[18,6,80,4,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,80,4],[18,45,80,4,"require"],[18,52,80,4],[18,53,80,4,"_dependencyMap"],[18,67,80,4],[19,2,80,4],[19,6,80,4,"_asyncToGenerator"],[19,23,80,4],[19,26,80,4,"_interopDefault"],[19,41,80,4],[19,42,80,4,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,80,4],[20,2,1,0],[20,6,1,0,"_zustand"],[20,14,1,0],[20,17,1,0,"require"],[20,24,1,0],[20,25,1,0,"_dependencyMap"],[20,39,1,0],[21,2,3,0],[21,6,3,0,"_servicesApi"],[21,18,3,0],[21,21,3,0,"require"],[21,28,3,0],[21,29,3,0,"_dependencyMap"],[21,43,3,0],[22,2,4,0],[22,6,4,0,"_servicesSocket"],[22,21,4,0],[22,24,4,0,"require"],[22,31,4,0],[22,32,4,0,"_dependencyMap"],[22,46,4,0],[23,2,4,0],[23,6,4,0,"socketService"],[23,19,4,0],[23,22,4,0,"_interopDefault"],[23,37,4,0],[23,38,4,0,"_servicesSocket"],[23,53,4,0],[24,2,20,7],[24,6,20,13,"useAuthStore"],[24,18,20,25],[24,21,20,28],[24,25,20,28,"create"],[24,33,20,34],[24,34,20,34,"create"],[24,40,20,34],[24,42,20,46],[24,43,20,47,"set"],[24,46,20,50],[24,48,20,52,"get"],[24,51,20,55],[24,57,20,61],[25,4,21,2,"user"],[25,8,21,6],[25,10,21,8],[25,14,21,12],[26,4,22,2,"isAuthenticated"],[26,19,22,17],[26,21,22,19],[26,26,22,24],[27,4,23,2,"isInitializing"],[27,18,23,16],[27,20,23,18],[27,24,23,22],[28,4,24,2,"isSubmitting"],[28,16,24,14],[28,18,24,16],[28,23,24,21],[29,4,25,2,"error"],[29,9,25,7],[29,11,25,9],[29,15,25,13],[30,4,27,2,"login"],[30,9,27,7],[31,6,27,7],[31,10,27,7,"_ref"],[31,14,27,7],[31,21,27,7,"_asyncToGenerator"],[31,38,27,7],[31,39,27,7,"default"],[31,46,27,7],[31,48,27,9],[31,59,27,16,"email"],[31,64,27,29],[31,66,27,31,"password"],[31,74,27,47],[31,76,27,70],[32,8,28,4,"set"],[32,11,28,7],[32,12,28,8],[33,10,28,10,"isSubmitting"],[33,22,28,22],[33,24,28,24],[33,28,28,28],[34,10,28,30,"error"],[34,15,28,35],[34,17,28,37],[35,8,28,42],[35,9,28,43],[35,10,28,44],[36,8,29,4],[36,12,29,8],[37,10,30,6],[37,16,30,12,"authApi"],[37,28,30,19],[37,29,30,19,"authApi"],[37,36,30,19],[37,37,30,20,"login"],[37,42,30,25],[37,43,30,26],[38,12,30,28,"email"],[38,17,30,33],[39,12,30,35,"password"],[40,10,30,44],[40,11,30,45],[40,12,30,46],[41,10,31,6],[41,14,31,12,"user"],[41,18,31,16],[41,27,31,25,"authApi"],[41,39,31,32],[41,40,31,32,"authApi"],[41,47,31,32],[41,48,31,33,"getCurrentUser"],[41,62,31,47],[41,63,31,48],[41,64,31,49],[43,10,33,6],[44,10,34,6],[44,14,34,12,"token"],[44,19,34,17],[44,28,34,26,"tokenManager"],[44,40,34,38],[44,41,34,38,"tokenManager"],[44,53,34,38],[44,54,34,39,"getAccessToken"],[44,68,34,53],[44,69,34,54],[44,70,34,55],[45,10,35,6],[45,14,35,10,"user"],[45,18,35,14],[45,19,35,15,"tenant_id"],[45,28,35,24],[45,32,35,28,"token"],[45,37,35,33],[45,39,35,35],[46,12,36,8,"socketService"],[46,25,36,21],[46,26,36,21,"default"],[46,33,36,21],[46,34,36,22,"connect"],[46,41,36,29],[46,42,36,30,"user"],[46,46,36,34],[46,47,36,35,"tenant_id"],[46,56,36,44],[46,58,36,46,"token"],[46,63,36,51],[46,64,36,52],[47,10,37,6],[48,10,39,6,"set"],[48,13,39,9],[48,14,39,10],[49,12,39,12,"user"],[49,16,39,16],[50,12,39,18,"isAuthenticated"],[50,27,39,33],[50,29,39,35],[50,33,39,39],[51,12,39,41,"isSubmitting"],[51,24,39,53],[51,26,39,55],[52,10,39,61],[52,11,39,62],[52,12,39,63],[53,10,40,6],[53,17,40,13],[53,21,40,17],[54,8,41,4],[54,9,41,5],[54,10,41,6],[54,17,41,13,"error"],[54,22,41,23],[54,24,41,25],[55,10,42,6],[55,14,42,12,"message"],[55,21,42,19],[55,24,42,22,"error"],[55,29,42,27],[55,30,42,28,"response"],[55,38,42,36],[55,40,42,38,"data"],[55,44,42,42],[55,46,42,44,"detail"],[55,52,42,50],[55,56,42,54],[55,77,42,75],[56,10,43,6,"set"],[56,13,43,9],[56,14,43,10],[57,12,43,12,"error"],[57,17,43,17],[57,19,43,19,"message"],[57,26,43,26],[58,12,43,28,"isSubmitting"],[58,24,43,40],[58,26,43,42],[59,10,43,48],[59,11,43,49],[59,12,43,50],[60,10,44,6],[60,17,44,13],[60,22,44,18],[61,8,45,4],[62,6,46,2],[62,7,46,3],[63,6,46,3],[63,22,27,2,"login"],[63,27,27,7,"login"],[63,28,27,7,"_x"],[63,30,27,7],[63,32,27,7,"_x2"],[63,35,27,7],[64,8,27,7],[64,15,27,7,"_ref"],[64,19,27,7],[64,20,27,7,"apply"],[64,25,27,7],[64,32,27,7,"arguments"],[64,41,27,7],[65,6,27,7],[66,4,27,7],[66,7,46,3],[67,4,48,2,"logout"],[67,10,48,8],[68,6,48,8],[68,10,48,8,"_ref2"],[68,15,48,8],[68,22,48,8,"_asyncToGenerator"],[68,39,48,8],[68,40,48,8,"default"],[68,47,48,8],[68,49,48,10],[68,62,48,37],[69,8,49,4,"socketService"],[69,21,49,17],[69,22,49,17,"default"],[69,29,49,17],[69,30,49,18,"disconnect"],[69,40,49,28],[69,41,49,29],[69,42,49,30],[70,8,50,4],[70,14,50,10,"authApi"],[70,26,50,17],[70,27,50,17,"authApi"],[70,34,50,17],[70,35,50,18,"logout"],[70,41,50,24],[70,42,50,25],[70,43,50,26],[71,8,51,4,"set"],[71,11,51,7],[71,12,51,8],[72,10,51,10,"user"],[72,14,51,14],[72,16,51,16],[72,20,51,20],[73,10,51,22,"isAuthenticated"],[73,25,51,37],[73,27,51,39],[73,32,51,44],[74,10,51,46,"error"],[74,15,51,51],[74,17,51,53],[75,8,51,58],[75,9,51,59],[75,10,51,60],[76,6,52,2],[76,7,52,3],[77,6,52,3],[77,22,48,2,"logout"],[77,28,48,8,"logout"],[77,29,48,8],[78,8,48,8],[78,15,48,8,"_ref2"],[78,20,48,8],[78,21,48,8,"apply"],[78,26,48,8],[78,33,48,8,"arguments"],[78,42,48,8],[79,6,48,8],[80,4,48,8],[80,7,52,3],[81,4,54,2,"checkAuth"],[81,13,54,11],[82,6,54,11],[82,10,54,11,"_ref3"],[82,15,54,11],[82,22,54,11,"_asyncToGenerator"],[82,39,54,11],[82,40,54,11,"default"],[82,47,54,11],[82,49,54,13],[82,62,54,43],[83,8,55,4,"set"],[83,11,55,7],[83,12,55,8],[84,10,55,10,"isInitializing"],[84,24,55,24],[84,26,55,26],[85,8,55,31],[85,9,55,32],[85,10,55,33],[86,8,56,4],[86,12,56,8],[87,10,57,6],[87,14,57,12,"token"],[87,19,57,17],[87,28,57,26,"tokenManager"],[87,40,57,38],[87,41,57,38,"tokenManager"],[87,53,57,38],[87,54,57,39,"getAccessToken"],[87,68,57,53],[87,69,57,54],[87,70,57,55],[88,10,58,6],[88,14,58,10],[88,15,58,11,"token"],[88,20,58,16],[88,22,58,18],[89,12,59,8,"set"],[89,15,59,11],[89,16,59,12],[90,14,59,14,"isInitializing"],[90,28,59,28],[90,30,59,30],[90,35,59,35],[91,14,59,37,"isAuthenticated"],[91,29,59,52],[91,31,59,54],[92,12,59,60],[92,13,59,61],[92,14,59,62],[93,12,60,8],[93,19,60,15],[93,24,60,20],[94,10,61,6],[95,10,63,6],[95,14,63,12,"user"],[95,18,63,16],[95,27,63,25,"authApi"],[95,39,63,32],[95,40,63,32,"authApi"],[95,47,63,32],[95,48,63,33,"getCurrentUser"],[95,62,63,47],[95,63,63,48],[95,64,63,49],[97,10,65,6],[98,10,66,6],[98,14,66,10,"user"],[98,18,66,14],[98,19,66,15,"tenant_id"],[98,28,66,24],[98,30,66,26],[99,12,67,8,"socketService"],[99,25,67,21],[99,26,67,21,"default"],[99,33,67,21],[99,34,67,22,"connect"],[99,41,67,29],[99,42,67,30,"user"],[99,46,67,34],[99,47,67,35,"tenant_id"],[99,56,67,44],[99,58,67,46,"token"],[99,63,67,51],[99,64,67,52],[100,10,68,6],[101,10,70,6,"set"],[101,13,70,9],[101,14,70,10],[102,12,70,12,"user"],[102,16,70,16],[103,12,70,18,"isAuthenticated"],[103,27,70,33],[103,29,70,35],[103,33,70,39],[104,12,70,41,"isInitializing"],[104,26,70,55],[104,28,70,57],[105,10,70,63],[105,11,70,64],[105,12,70,65],[106,10,71,6],[106,17,71,13],[106,21,71,17],[107,8,72,4],[107,9,72,5],[107,10,72,6],[107,17,72,13,"error"],[107,22,72,18],[107,24,72,20],[108,10,73,6],[108,16,73,12,"tokenManager"],[108,28,73,24],[108,29,73,24,"tokenManager"],[108,41,73,24],[108,42,73,25,"clearTokens"],[108,53,73,36],[108,54,73,37],[108,55,73,38],[109,10,74,6,"set"],[109,13,74,9],[109,14,74,10],[110,12,74,12,"user"],[110,16,74,16],[110,18,74,18],[110,22,74,22],[111,12,74,24,"isAuthenticated"],[111,27,74,39],[111,29,74,41],[111,34,74,46],[112,12,74,48,"isInitializing"],[112,26,74,62],[112,28,74,64],[113,10,74,70],[113,11,74,71],[113,12,74,72],[114,10,75,6],[114,17,75,13],[114,22,75,18],[115,8,76,4],[116,6,77,2],[116,7,77,3],[117,6,77,3],[117,22,54,2,"checkAuth"],[117,31,54,11,"checkAuth"],[117,32,54,11],[118,8,54,11],[118,15,54,11,"_ref3"],[118,20,54,11],[118,21,54,11,"apply"],[118,26,54,11],[118,33,54,11,"arguments"],[118,42,54,11],[119,6,54,11],[120,4,54,11],[120,7,77,3],[121,4,79,2,"clearError"],[121,14,79,12],[121,16,79,14,"clearError"],[121,17,79,14],[121,22,79,20,"set"],[121,25,79,23],[121,26,79,24],[122,6,79,26,"error"],[122,11,79,31],[122,13,79,33],[123,4,79,38],[123,5,79,39],[124,2,80,0],[124,3,80,1],[124,4,80,2],[124,5,80,3],[125,0,80,4],[125,3]],"functionMap":{"names":["<global>","create$argument_0","login","logout","checkAuth","clearError"],"mappings":"AAA;8CCmB;SCO;GDmB;UEE;GFI;aGE;GHuB;cIE,0BJ;EDC"},"hasCjsExports":false},"type":"js/module"}]}