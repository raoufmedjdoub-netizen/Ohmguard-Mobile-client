{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":67},"end":{"line":3,"column":56,"index":123}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"../services/socket","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":124},"end":{"line":4,"column":47,"index":171}}],"key":"Zr9DRnwDVZxHFeGDyPwyujLo6pk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _zustand = require(_dependencyMap[1], \"zustand\");\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _servicesSocket = require(_dependencyMap[3], \"../services/socket\");\n  var socketService = _interopDefault(_servicesSocket);\n  var useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    isAuthenticated: false,\n    isLoading: true,\n    error: null,\n    login: function () {\n      var _ref = (0, _asyncToGenerator.default)(function* (email, password) {\n        set({\n          isLoading: true,\n          error: null\n        });\n        try {\n          yield _servicesApi.authApi.login({\n            email,\n            password\n          });\n          var user = yield _servicesApi.authApi.getCurrentUser();\n\n          // Connect to WebSocket\n          var token = yield _servicesApi.tokenManager.getAccessToken();\n          if (user.tenant_id && token) {\n            socketService.default.connect(user.tenant_id, token);\n          }\n          set({\n            user,\n            isAuthenticated: true,\n            isLoading: false\n          });\n          return true;\n        } catch (error) {\n          var message = error.response?.data?.detail || 'Erreur de connexion';\n          set({\n            error: message,\n            isLoading: false\n          });\n          return false;\n        }\n      });\n      return function login(_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }(),\n    logout: function () {\n      var _ref2 = (0, _asyncToGenerator.default)(function* () {\n        socketService.default.disconnect();\n        yield _servicesApi.authApi.logout();\n        set({\n          user: null,\n          isAuthenticated: false,\n          error: null\n        });\n      });\n      return function logout() {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    checkAuth: function () {\n      var _ref3 = (0, _asyncToGenerator.default)(function* () {\n        set({\n          isLoading: true\n        });\n        try {\n          var token = yield _servicesApi.tokenManager.getAccessToken();\n          if (!token) {\n            set({\n              isLoading: false,\n              isAuthenticated: false\n            });\n            return false;\n          }\n          var user = yield _servicesApi.authApi.getCurrentUser();\n\n          // Connect to WebSocket\n          if (user.tenant_id) {\n            socketService.default.connect(user.tenant_id, token);\n          }\n          set({\n            user,\n            isAuthenticated: true,\n            isLoading: false\n          });\n          return true;\n        } catch (error) {\n          yield _servicesApi.tokenManager.clearTokens();\n          set({\n            user: null,\n            isAuthenticated: false,\n            isLoading: false\n          });\n          return false;\n        }\n      });\n      return function checkAuth() {\n        return _ref3.apply(this, arguments);\n      };\n    }(),\n    clearError: () => set({\n      error: null\n    })\n  }));\n});","lineCount":124,"map":[[12,2,19,0,"Object"],[12,8,19,0],[12,9,19,0,"defineProperty"],[12,23,19,0],[12,24,19,0,"exports"],[12,31,19,0],[13,4,19,0,"enumerable"],[13,14,19,0],[14,4,19,0,"get"],[14,7,19,0],[14,18,19,0,"get"],[14,19,19,0],[15,6,19,0],[15,13,19,0,"useAuthStore"],[15,25,19,0],[16,4,19,0],[17,2,19,0],[18,2,78,4],[18,6,78,4,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,78,4],[18,45,78,4,"require"],[18,52,78,4],[18,53,78,4,"_dependencyMap"],[18,67,78,4],[19,2,78,4],[19,6,78,4,"_asyncToGenerator"],[19,23,78,4],[19,26,78,4,"_interopDefault"],[19,41,78,4],[19,42,78,4,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,78,4],[20,2,1,0],[20,6,1,0,"_zustand"],[20,14,1,0],[20,17,1,0,"require"],[20,24,1,0],[20,25,1,0,"_dependencyMap"],[20,39,1,0],[21,2,3,0],[21,6,3,0,"_servicesApi"],[21,18,3,0],[21,21,3,0,"require"],[21,28,3,0],[21,29,3,0,"_dependencyMap"],[21,43,3,0],[22,2,4,0],[22,6,4,0,"_servicesSocket"],[22,21,4,0],[22,24,4,0,"require"],[22,31,4,0],[22,32,4,0,"_dependencyMap"],[22,46,4,0],[23,2,4,0],[23,6,4,0,"socketService"],[23,19,4,0],[23,22,4,0,"_interopDefault"],[23,37,4,0],[23,38,4,0,"_servicesSocket"],[23,53,4,0],[24,2,19,7],[24,6,19,13,"useAuthStore"],[24,18,19,25],[24,21,19,28],[24,25,19,28,"create"],[24,33,19,34],[24,34,19,34,"create"],[24,40,19,34],[24,42,19,46],[24,43,19,47,"set"],[24,46,19,50],[24,48,19,52,"get"],[24,51,19,55],[24,57,19,61],[25,4,20,2,"user"],[25,8,20,6],[25,10,20,8],[25,14,20,12],[26,4,21,2,"isAuthenticated"],[26,19,21,17],[26,21,21,19],[26,26,21,24],[27,4,22,2,"isLoading"],[27,13,22,11],[27,15,22,13],[27,19,22,17],[28,4,23,2,"error"],[28,9,23,7],[28,11,23,9],[28,15,23,13],[29,4,25,2,"login"],[29,9,25,7],[30,6,25,7],[30,10,25,7,"_ref"],[30,14,25,7],[30,21,25,7,"_asyncToGenerator"],[30,38,25,7],[30,39,25,7,"default"],[30,46,25,7],[30,48,25,9],[30,59,25,16,"email"],[30,64,25,29],[30,66,25,31,"password"],[30,74,25,47],[30,76,25,70],[31,8,26,4,"set"],[31,11,26,7],[31,12,26,8],[32,10,26,10,"isLoading"],[32,19,26,19],[32,21,26,21],[32,25,26,25],[33,10,26,27,"error"],[33,15,26,32],[33,17,26,34],[34,8,26,39],[34,9,26,40],[34,10,26,41],[35,8,27,4],[35,12,27,8],[36,10,28,6],[36,16,28,12,"authApi"],[36,28,28,19],[36,29,28,19,"authApi"],[36,36,28,19],[36,37,28,20,"login"],[36,42,28,25],[36,43,28,26],[37,12,28,28,"email"],[37,17,28,33],[38,12,28,35,"password"],[39,10,28,44],[39,11,28,45],[39,12,28,46],[40,10,29,6],[40,14,29,12,"user"],[40,18,29,16],[40,27,29,25,"authApi"],[40,39,29,32],[40,40,29,32,"authApi"],[40,47,29,32],[40,48,29,33,"getCurrentUser"],[40,62,29,47],[40,63,29,48],[40,64,29,49],[42,10,31,6],[43,10,32,6],[43,14,32,12,"token"],[43,19,32,17],[43,28,32,26,"tokenManager"],[43,40,32,38],[43,41,32,38,"tokenManager"],[43,53,32,38],[43,54,32,39,"getAccessToken"],[43,68,32,53],[43,69,32,54],[43,70,32,55],[44,10,33,6],[44,14,33,10,"user"],[44,18,33,14],[44,19,33,15,"tenant_id"],[44,28,33,24],[44,32,33,28,"token"],[44,37,33,33],[44,39,33,35],[45,12,34,8,"socketService"],[45,25,34,21],[45,26,34,21,"default"],[45,33,34,21],[45,34,34,22,"connect"],[45,41,34,29],[45,42,34,30,"user"],[45,46,34,34],[45,47,34,35,"tenant_id"],[45,56,34,44],[45,58,34,46,"token"],[45,63,34,51],[45,64,34,52],[46,10,35,6],[47,10,37,6,"set"],[47,13,37,9],[47,14,37,10],[48,12,37,12,"user"],[48,16,37,16],[49,12,37,18,"isAuthenticated"],[49,27,37,33],[49,29,37,35],[49,33,37,39],[50,12,37,41,"isLoading"],[50,21,37,50],[50,23,37,52],[51,10,37,58],[51,11,37,59],[51,12,37,60],[52,10,38,6],[52,17,38,13],[52,21,38,17],[53,8,39,4],[53,9,39,5],[53,10,39,6],[53,17,39,13,"error"],[53,22,39,23],[53,24,39,25],[54,10,40,6],[54,14,40,12,"message"],[54,21,40,19],[54,24,40,22,"error"],[54,29,40,27],[54,30,40,28,"response"],[54,38,40,36],[54,40,40,38,"data"],[54,44,40,42],[54,46,40,44,"detail"],[54,52,40,50],[54,56,40,54],[54,77,40,75],[55,10,41,6,"set"],[55,13,41,9],[55,14,41,10],[56,12,41,12,"error"],[56,17,41,17],[56,19,41,19,"message"],[56,26,41,26],[57,12,41,28,"isLoading"],[57,21,41,37],[57,23,41,39],[58,10,41,45],[58,11,41,46],[58,12,41,47],[59,10,42,6],[59,17,42,13],[59,22,42,18],[60,8,43,4],[61,6,44,2],[61,7,44,3],[62,6,44,3],[62,22,25,2,"login"],[62,27,25,7,"login"],[62,28,25,7,"_x"],[62,30,25,7],[62,32,25,7,"_x2"],[62,35,25,7],[63,8,25,7],[63,15,25,7,"_ref"],[63,19,25,7],[63,20,25,7,"apply"],[63,25,25,7],[63,32,25,7,"arguments"],[63,41,25,7],[64,6,25,7],[65,4,25,7],[65,7,44,3],[66,4,46,2,"logout"],[66,10,46,8],[67,6,46,8],[67,10,46,8,"_ref2"],[67,15,46,8],[67,22,46,8,"_asyncToGenerator"],[67,39,46,8],[67,40,46,8,"default"],[67,47,46,8],[67,49,46,10],[67,62,46,37],[68,8,47,4,"socketService"],[68,21,47,17],[68,22,47,17,"default"],[68,29,47,17],[68,30,47,18,"disconnect"],[68,40,47,28],[68,41,47,29],[68,42,47,30],[69,8,48,4],[69,14,48,10,"authApi"],[69,26,48,17],[69,27,48,17,"authApi"],[69,34,48,17],[69,35,48,18,"logout"],[69,41,48,24],[69,42,48,25],[69,43,48,26],[70,8,49,4,"set"],[70,11,49,7],[70,12,49,8],[71,10,49,10,"user"],[71,14,49,14],[71,16,49,16],[71,20,49,20],[72,10,49,22,"isAuthenticated"],[72,25,49,37],[72,27,49,39],[72,32,49,44],[73,10,49,46,"error"],[73,15,49,51],[73,17,49,53],[74,8,49,58],[74,9,49,59],[74,10,49,60],[75,6,50,2],[75,7,50,3],[76,6,50,3],[76,22,46,2,"logout"],[76,28,46,8,"logout"],[76,29,46,8],[77,8,46,8],[77,15,46,8,"_ref2"],[77,20,46,8],[77,21,46,8,"apply"],[77,26,46,8],[77,33,46,8,"arguments"],[77,42,46,8],[78,6,46,8],[79,4,46,8],[79,7,50,3],[80,4,52,2,"checkAuth"],[80,13,52,11],[81,6,52,11],[81,10,52,11,"_ref3"],[81,15,52,11],[81,22,52,11,"_asyncToGenerator"],[81,39,52,11],[81,40,52,11,"default"],[81,47,52,11],[81,49,52,13],[81,62,52,43],[82,8,53,4,"set"],[82,11,53,7],[82,12,53,8],[83,10,53,10,"isLoading"],[83,19,53,19],[83,21,53,21],[84,8,53,26],[84,9,53,27],[84,10,53,28],[85,8,54,4],[85,12,54,8],[86,10,55,6],[86,14,55,12,"token"],[86,19,55,17],[86,28,55,26,"tokenManager"],[86,40,55,38],[86,41,55,38,"tokenManager"],[86,53,55,38],[86,54,55,39,"getAccessToken"],[86,68,55,53],[86,69,55,54],[86,70,55,55],[87,10,56,6],[87,14,56,10],[87,15,56,11,"token"],[87,20,56,16],[87,22,56,18],[88,12,57,8,"set"],[88,15,57,11],[88,16,57,12],[89,14,57,14,"isLoading"],[89,23,57,23],[89,25,57,25],[89,30,57,30],[90,14,57,32,"isAuthenticated"],[90,29,57,47],[90,31,57,49],[91,12,57,55],[91,13,57,56],[91,14,57,57],[92,12,58,8],[92,19,58,15],[92,24,58,20],[93,10,59,6],[94,10,61,6],[94,14,61,12,"user"],[94,18,61,16],[94,27,61,25,"authApi"],[94,39,61,32],[94,40,61,32,"authApi"],[94,47,61,32],[94,48,61,33,"getCurrentUser"],[94,62,61,47],[94,63,61,48],[94,64,61,49],[96,10,63,6],[97,10,64,6],[97,14,64,10,"user"],[97,18,64,14],[97,19,64,15,"tenant_id"],[97,28,64,24],[97,30,64,26],[98,12,65,8,"socketService"],[98,25,65,21],[98,26,65,21,"default"],[98,33,65,21],[98,34,65,22,"connect"],[98,41,65,29],[98,42,65,30,"user"],[98,46,65,34],[98,47,65,35,"tenant_id"],[98,56,65,44],[98,58,65,46,"token"],[98,63,65,51],[98,64,65,52],[99,10,66,6],[100,10,68,6,"set"],[100,13,68,9],[100,14,68,10],[101,12,68,12,"user"],[101,16,68,16],[102,12,68,18,"isAuthenticated"],[102,27,68,33],[102,29,68,35],[102,33,68,39],[103,12,68,41,"isLoading"],[103,21,68,50],[103,23,68,52],[104,10,68,58],[104,11,68,59],[104,12,68,60],[105,10,69,6],[105,17,69,13],[105,21,69,17],[106,8,70,4],[106,9,70,5],[106,10,70,6],[106,17,70,13,"error"],[106,22,70,18],[106,24,70,20],[107,10,71,6],[107,16,71,12,"tokenManager"],[107,28,71,24],[107,29,71,24,"tokenManager"],[107,41,71,24],[107,42,71,25,"clearTokens"],[107,53,71,36],[107,54,71,37],[107,55,71,38],[108,10,72,6,"set"],[108,13,72,9],[108,14,72,10],[109,12,72,12,"user"],[109,16,72,16],[109,18,72,18],[109,22,72,22],[110,12,72,24,"isAuthenticated"],[110,27,72,39],[110,29,72,41],[110,34,72,46],[111,12,72,48,"isLoading"],[111,21,72,57],[111,23,72,59],[112,10,72,65],[112,11,72,66],[112,12,72,67],[113,10,73,6],[113,17,73,13],[113,22,73,18],[114,8,74,4],[115,6,75,2],[115,7,75,3],[116,6,75,3],[116,22,52,2,"checkAuth"],[116,31,52,11,"checkAuth"],[116,32,52,11],[117,8,52,11],[117,15,52,11,"_ref3"],[117,20,52,11],[117,21,52,11,"apply"],[117,26,52,11],[117,33,52,11,"arguments"],[117,42,52,11],[118,6,52,11],[119,4,52,11],[119,7,75,3],[120,4,77,2,"clearError"],[120,14,77,12],[120,16,77,14,"clearError"],[120,17,77,14],[120,22,77,20,"set"],[120,25,77,23],[120,26,77,24],[121,6,77,26,"error"],[121,11,77,31],[121,13,77,33],[122,4,77,38],[122,5,77,39],[123,2,78,0],[123,3,78,1],[123,4,78,2],[123,5,78,3],[124,0,78,4],[124,3]],"functionMap":{"names":["<global>","create$argument_0","login","logout","checkAuth","clearError"],"mappings":"AAA;8CCkB;SCM;GDmB;UEE;GFI;aGE;GHuB;cIE,0BJ;EDC"},"hasCjsExports":false},"type":"js/module"}]}