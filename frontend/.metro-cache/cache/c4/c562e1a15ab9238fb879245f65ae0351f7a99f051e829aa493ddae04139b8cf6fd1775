{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":81},"end":{"line":3,"column":44,"index":125}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"useAlertStore\", {\n    enumerable: true,\n    get: function () {\n      return useAlertStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _servicesApi = require(_dependencyMap[1], \"../services/api\");\n  const useAlertStore = (0, _zustand.create)((set, get) => ({\n    alerts: [],\n    selectedAlert: null,\n    isLoading: false,\n    isRefreshing: false,\n    error: null,\n    statusFilter: 'ALL',\n    fetchAlerts: async () => {\n      set({\n        isLoading: true,\n        error: null\n      });\n      try {\n        const {\n          statusFilter\n        } = get();\n        const params = {\n          limit: 100\n          // Only fetch FALL and PRE_FALL events for this app\n        };\n        if (statusFilter !== 'ALL') {\n          params.status = statusFilter;\n        }\n        const alerts = await _servicesApi.alertsApi.getAlerts(params);\n\n        // Filter to only show FALL and PRE_FALL events\n        const fallAlerts = alerts.filter(a => a.type === 'FALL' || a.type === 'PRE_FALL');\n        set({\n          alerts: fallAlerts,\n          isLoading: false\n        });\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Erreur de chargement';\n        set({\n          error: message,\n          isLoading: false\n        });\n      }\n    },\n    refreshAlerts: async () => {\n      set({\n        isRefreshing: true\n      });\n      try {\n        const {\n          statusFilter\n        } = get();\n        const params = {\n          limit: 100\n        };\n        if (statusFilter !== 'ALL') {\n          params.status = statusFilter;\n        }\n        const alerts = await _servicesApi.alertsApi.getAlerts(params);\n        const fallAlerts = alerts.filter(a => a.type === 'FALL' || a.type === 'PRE_FALL');\n        set({\n          alerts: fallAlerts,\n          isRefreshing: false\n        });\n      } catch (error) {\n        set({\n          isRefreshing: false\n        });\n      }\n    },\n    fetchAlertDetail: async id => {\n      set({\n        isLoading: true,\n        error: null\n      });\n      try {\n        const alert = await _servicesApi.alertsApi.getAlert(id);\n        set({\n          selectedAlert: alert,\n          isLoading: false\n        });\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Erreur de chargement';\n        set({\n          error: message,\n          isLoading: false\n        });\n      }\n    },\n    acknowledgeAlert: async id => {\n      set({\n        isLoading: true,\n        error: null\n      });\n      try {\n        const updatedAlert = await _servicesApi.alertsApi.acknowledgeAlert(id);\n\n        // Update in list\n        const {\n          alerts\n        } = get();\n        const updatedAlerts = alerts.map(a => a.id === id ? updatedAlert : a);\n        set({\n          alerts: updatedAlerts,\n          selectedAlert: updatedAlert,\n          isLoading: false\n        });\n        return true;\n      } catch (error) {\n        const message = error.response?.data?.detail || \"Erreur d'acquittement\";\n        set({\n          error: message,\n          isLoading: false\n        });\n        return false;\n      }\n    },\n    addNewAlert: alert => {\n      // Only add FALL or PRE_FALL alerts\n      if (alert.type !== 'FALL' && alert.type !== 'PRE_FALL') return;\n      const {\n        alerts\n      } = get();\n      // Check if already exists\n      if (alerts.find(a => a.id === alert.id)) return;\n\n      // Add to beginning of list\n      set({\n        alerts: [alert, ...alerts]\n      });\n    },\n    updateAlertInList: (id, update) => {\n      const {\n        alerts,\n        selectedAlert\n      } = get();\n      const updatedAlerts = alerts.map(a => a.id === id ? {\n        ...a,\n        ...update\n      } : a);\n      const updatedSelected = selectedAlert?.id === id ? {\n        ...selectedAlert,\n        ...update\n      } : selectedAlert;\n      set({\n        alerts: updatedAlerts,\n        selectedAlert: updatedSelected\n      });\n    },\n    setStatusFilter: status => {\n      set({\n        statusFilter: status\n      });\n      get().fetchAlerts();\n    },\n    clearError: () => set({\n      error: null\n    })\n  }));\n});","lineCount":169,"map":[[7,2,26,0,"Object"],[7,8,26,0],[7,9,26,0,"defineProperty"],[7,23,26,0],[7,24,26,0,"exports"],[7,31,26,0],[8,4,26,0,"enumerable"],[8,14,26,0],[9,4,26,0,"get"],[9,7,26,0],[9,18,26,0,"get"],[9,19,26,0],[10,6,26,0],[10,13,26,0,"useAlertStore"],[10,26,26,0],[11,4,26,0],[12,2,26,0],[13,2,1,0],[13,6,1,0,"_zustand"],[13,14,1,0],[13,17,1,0,"require"],[13,24,1,0],[13,25,1,0,"_dependencyMap"],[13,39,1,0],[14,2,3,0],[14,6,3,0,"_servicesApi"],[14,18,3,0],[14,21,3,0,"require"],[14,28,3,0],[14,29,3,0,"_dependencyMap"],[14,43,3,0],[15,2,26,7],[15,8,26,13,"useAlertStore"],[15,21,26,26],[15,24,26,29],[15,28,26,29,"create"],[15,36,26,35],[15,37,26,35,"create"],[15,43,26,35],[15,45,26,48],[15,46,26,49,"set"],[15,49,26,52],[15,51,26,54,"get"],[15,54,26,57],[15,60,26,63],[16,4,27,2,"alerts"],[16,10,27,8],[16,12,27,10],[16,14,27,12],[17,4,28,2,"selectedAlert"],[17,17,28,15],[17,19,28,17],[17,23,28,21],[18,4,29,2,"isLoading"],[18,13,29,11],[18,15,29,13],[18,20,29,18],[19,4,30,2,"isRefreshing"],[19,16,30,14],[19,18,30,16],[19,23,30,21],[20,4,31,2,"error"],[20,9,31,7],[20,11,31,9],[20,15,31,13],[21,4,32,2,"statusFilter"],[21,16,32,14],[21,18,32,16],[21,23,32,21],[22,4,34,2,"fetchAlerts"],[22,15,34,13],[22,17,34,15],[22,23,34,15,"fetchAlerts"],[22,24,34,15],[22,29,34,42],[23,6,35,4,"set"],[23,9,35,7],[23,10,35,8],[24,8,35,10,"isLoading"],[24,17,35,19],[24,19,35,21],[24,23,35,25],[25,8,35,27,"error"],[25,13,35,32],[25,15,35,34],[26,6,35,39],[26,7,35,40],[26,8,35,41],[27,6,36,4],[27,10,36,8],[28,8,37,6],[28,14,37,12],[29,10,37,14,"statusFilter"],[30,8,37,27],[30,9,37,28],[30,12,37,31,"get"],[30,15,37,34],[30,16,37,35],[30,17,37,36],[31,8,38,6],[31,14,38,12,"params"],[31,20,38,23],[31,23,38,26],[32,10,39,8,"limit"],[32,15,39,13],[32,17,39,15],[33,10,40,8],[34,8,41,6],[34,9,41,7],[35,8,43,6],[35,12,43,10,"statusFilter"],[35,24,43,22],[35,29,43,27],[35,34,43,32],[35,36,43,34],[36,10,44,8,"params"],[36,16,44,14],[36,17,44,15,"status"],[36,23,44,21],[36,26,44,24,"statusFilter"],[36,38,44,36],[37,8,45,6],[38,8,47,6],[38,14,47,12,"alerts"],[38,20,47,18],[38,23,47,21],[38,29,47,27,"alertsApi"],[38,41,47,36],[38,42,47,36,"alertsApi"],[38,51,47,36],[38,52,47,37,"getAlerts"],[38,61,47,46],[38,62,47,47,"params"],[38,68,47,53],[38,69,47,54],[40,8,49,6],[41,8,50,6],[41,14,50,12,"fallAlerts"],[41,24,50,22],[41,27,50,25,"alerts"],[41,33,50,31],[41,34,50,32,"filter"],[41,40,50,38],[41,41,51,9,"a"],[41,42,51,10],[41,46,51,15,"a"],[41,47,51,16],[41,48,51,17,"type"],[41,52,51,21],[41,57,51,26],[41,63,51,32],[41,67,51,36,"a"],[41,68,51,37],[41,69,51,38,"type"],[41,73,51,42],[41,78,51,47],[41,88,52,6],[41,89,52,7],[42,8,54,6,"set"],[42,11,54,9],[42,12,54,10],[43,10,54,12,"alerts"],[43,16,54,18],[43,18,54,20,"fallAlerts"],[43,28,54,30],[44,10,54,32,"isLoading"],[44,19,54,41],[44,21,54,43],[45,8,54,49],[45,9,54,50],[45,10,54,51],[46,6,55,4],[46,7,55,5],[46,8,55,6],[46,15,55,13,"error"],[46,20,55,23],[46,22,55,25],[47,8,56,6],[47,14,56,12,"message"],[47,21,56,19],[47,24,56,22,"error"],[47,29,56,27],[47,30,56,28,"response"],[47,38,56,36],[47,40,56,38,"data"],[47,44,56,42],[47,46,56,44,"detail"],[47,52,56,50],[47,56,56,54],[47,78,56,76],[48,8,57,6,"set"],[48,11,57,9],[48,12,57,10],[49,10,57,12,"error"],[49,15,57,17],[49,17,57,19,"message"],[49,24,57,26],[50,10,57,28,"isLoading"],[50,19,57,37],[50,21,57,39],[51,8,57,45],[51,9,57,46],[51,10,57,47],[52,6,58,4],[53,4,59,2],[53,5,59,3],[54,4,61,2,"refreshAlerts"],[54,17,61,15],[54,19,61,17],[54,25,61,17,"refreshAlerts"],[54,26,61,17],[54,31,61,44],[55,6,62,4,"set"],[55,9,62,7],[55,10,62,8],[56,8,62,10,"isRefreshing"],[56,20,62,22],[56,22,62,24],[57,6,62,29],[57,7,62,30],[57,8,62,31],[58,6,63,4],[58,10,63,8],[59,8,64,6],[59,14,64,12],[60,10,64,14,"statusFilter"],[61,8,64,27],[61,9,64,28],[61,12,64,31,"get"],[61,15,64,34],[61,16,64,35],[61,17,64,36],[62,8,65,6],[62,14,65,12,"params"],[62,20,65,23],[62,23,65,26],[63,10,65,28,"limit"],[63,15,65,33],[63,17,65,35],[64,8,65,39],[64,9,65,40],[65,8,67,6],[65,12,67,10,"statusFilter"],[65,24,67,22],[65,29,67,27],[65,34,67,32],[65,36,67,34],[66,10,68,8,"params"],[66,16,68,14],[66,17,68,15,"status"],[66,23,68,21],[66,26,68,24,"statusFilter"],[66,38,68,36],[67,8,69,6],[68,8,71,6],[68,14,71,12,"alerts"],[68,20,71,18],[68,23,71,21],[68,29,71,27,"alertsApi"],[68,41,71,36],[68,42,71,36,"alertsApi"],[68,51,71,36],[68,52,71,37,"getAlerts"],[68,61,71,46],[68,62,71,47,"params"],[68,68,71,53],[68,69,71,54],[69,8,72,6],[69,14,72,12,"fallAlerts"],[69,24,72,22],[69,27,72,25,"alerts"],[69,33,72,31],[69,34,72,32,"filter"],[69,40,72,38],[69,41,73,9,"a"],[69,42,73,10],[69,46,73,15,"a"],[69,47,73,16],[69,48,73,17,"type"],[69,52,73,21],[69,57,73,26],[69,63,73,32],[69,67,73,36,"a"],[69,68,73,37],[69,69,73,38,"type"],[69,73,73,42],[69,78,73,47],[69,88,74,6],[69,89,74,7],[70,8,76,6,"set"],[70,11,76,9],[70,12,76,10],[71,10,76,12,"alerts"],[71,16,76,18],[71,18,76,20,"fallAlerts"],[71,28,76,30],[72,10,76,32,"isRefreshing"],[72,22,76,44],[72,24,76,46],[73,8,76,52],[73,9,76,53],[73,10,76,54],[74,6,77,4],[74,7,77,5],[74,8,77,6],[74,15,77,13,"error"],[74,20,77,23],[74,22,77,25],[75,8,78,6,"set"],[75,11,78,9],[75,12,78,10],[76,10,78,12,"isRefreshing"],[76,22,78,24],[76,24,78,26],[77,8,78,32],[77,9,78,33],[77,10,78,34],[78,6,79,4],[79,4,80,2],[79,5,80,3],[80,4,82,2,"fetchAlertDetail"],[80,20,82,18],[80,22,82,20],[80,28,82,27,"id"],[80,30,82,37],[80,34,82,57],[81,6,83,4,"set"],[81,9,83,7],[81,10,83,8],[82,8,83,10,"isLoading"],[82,17,83,19],[82,19,83,21],[82,23,83,25],[83,8,83,27,"error"],[83,13,83,32],[83,15,83,34],[84,6,83,39],[84,7,83,40],[84,8,83,41],[85,6,84,4],[85,10,84,8],[86,8,85,6],[86,14,85,12,"alert"],[86,19,85,17],[86,22,85,20],[86,28,85,26,"alertsApi"],[86,40,85,35],[86,41,85,35,"alertsApi"],[86,50,85,35],[86,51,85,36,"getAlert"],[86,59,85,44],[86,60,85,45,"id"],[86,62,85,47],[86,63,85,48],[87,8,86,6,"set"],[87,11,86,9],[87,12,86,10],[88,10,86,12,"selectedAlert"],[88,23,86,25],[88,25,86,27,"alert"],[88,30,86,32],[89,10,86,34,"isLoading"],[89,19,86,43],[89,21,86,45],[90,8,86,51],[90,9,86,52],[90,10,86,53],[91,6,87,4],[91,7,87,5],[91,8,87,6],[91,15,87,13,"error"],[91,20,87,23],[91,22,87,25],[92,8,88,6],[92,14,88,12,"message"],[92,21,88,19],[92,24,88,22,"error"],[92,29,88,27],[92,30,88,28,"response"],[92,38,88,36],[92,40,88,38,"data"],[92,44,88,42],[92,46,88,44,"detail"],[92,52,88,50],[92,56,88,54],[92,78,88,76],[93,8,89,6,"set"],[93,11,89,9],[93,12,89,10],[94,10,89,12,"error"],[94,15,89,17],[94,17,89,19,"message"],[94,24,89,26],[95,10,89,28,"isLoading"],[95,19,89,37],[95,21,89,39],[96,8,89,45],[96,9,89,46],[96,10,89,47],[97,6,90,4],[98,4,91,2],[98,5,91,3],[99,4,93,2,"acknowledgeAlert"],[99,20,93,18],[99,22,93,20],[99,28,93,27,"id"],[99,30,93,37],[99,34,93,60],[100,6,94,4,"set"],[100,9,94,7],[100,10,94,8],[101,8,94,10,"isLoading"],[101,17,94,19],[101,19,94,21],[101,23,94,25],[102,8,94,27,"error"],[102,13,94,32],[102,15,94,34],[103,6,94,39],[103,7,94,40],[103,8,94,41],[104,6,95,4],[104,10,95,8],[105,8,96,6],[105,14,96,12,"updatedAlert"],[105,26,96,24],[105,29,96,27],[105,35,96,33,"alertsApi"],[105,47,96,42],[105,48,96,42,"alertsApi"],[105,57,96,42],[105,58,96,43,"acknowledgeAlert"],[105,74,96,59],[105,75,96,60,"id"],[105,77,96,62],[105,78,96,63],[107,8,98,6],[108,8,99,6],[108,14,99,12],[109,10,99,14,"alerts"],[110,8,99,21],[110,9,99,22],[110,12,99,25,"get"],[110,15,99,28],[110,16,99,29],[110,17,99,30],[111,8,100,6],[111,14,100,12,"updatedAlerts"],[111,27,100,25],[111,30,100,28,"alerts"],[111,36,100,34],[111,37,100,35,"map"],[111,40,100,38],[111,41,100,40,"a"],[111,42,100,41],[111,46,101,8,"a"],[111,47,101,9],[111,48,101,10,"id"],[111,50,101,12],[111,55,101,17,"id"],[111,57,101,19],[111,60,101,22,"updatedAlert"],[111,72,101,34],[111,75,101,37,"a"],[111,76,102,6],[111,77,102,7],[112,8,104,6,"set"],[112,11,104,9],[112,12,104,10],[113,10,105,8,"alerts"],[113,16,105,14],[113,18,105,16,"updatedAlerts"],[113,31,105,29],[114,10,106,8,"selectedAlert"],[114,23,106,21],[114,25,106,23,"updatedAlert"],[114,37,106,35],[115,10,107,8,"isLoading"],[115,19,107,17],[115,21,107,19],[116,8,108,6],[116,9,108,7],[116,10,108,8],[117,8,110,6],[117,15,110,13],[117,19,110,17],[118,6,111,4],[118,7,111,5],[118,8,111,6],[118,15,111,13,"error"],[118,20,111,23],[118,22,111,25],[119,8,112,6],[119,14,112,12,"message"],[119,21,112,19],[119,24,112,22,"error"],[119,29,112,27],[119,30,112,28,"response"],[119,38,112,36],[119,40,112,38,"data"],[119,44,112,42],[119,46,112,44,"detail"],[119,52,112,50],[119,56,112,54],[119,79,112,77],[120,8,113,6,"set"],[120,11,113,9],[120,12,113,10],[121,10,113,12,"error"],[121,15,113,17],[121,17,113,19,"message"],[121,24,113,26],[122,10,113,28,"isLoading"],[122,19,113,37],[122,21,113,39],[123,8,113,45],[123,9,113,46],[123,10,113,47],[124,8,114,6],[124,15,114,13],[124,20,114,18],[125,6,115,4],[126,4,116,2],[126,5,116,3],[127,4,118,2,"addNewAlert"],[127,15,118,13],[127,17,118,16,"alert"],[127,22,118,28],[127,26,118,39],[128,6,119,4],[129,6,120,4],[129,10,120,8,"alert"],[129,15,120,13],[129,16,120,14,"type"],[129,20,120,18],[129,25,120,23],[129,31,120,29],[129,35,120,33,"alert"],[129,40,120,38],[129,41,120,39,"type"],[129,45,120,43],[129,50,120,48],[129,60,120,58],[129,62,120,60],[130,6,122,4],[130,12,122,10],[131,8,122,12,"alerts"],[132,6,122,19],[132,7,122,20],[132,10,122,23,"get"],[132,13,122,26],[132,14,122,27],[132,15,122,28],[133,6,123,4],[134,6,124,4],[134,10,124,8,"alerts"],[134,16,124,14],[134,17,124,15,"find"],[134,21,124,19],[134,22,124,21,"a"],[134,23,124,22],[134,27,124,27,"a"],[134,28,124,28],[134,29,124,29,"id"],[134,31,124,31],[134,36,124,36,"alert"],[134,41,124,41],[134,42,124,42,"id"],[134,44,124,44],[134,45,124,45],[134,47,124,47],[136,6,126,4],[137,6,127,4,"set"],[137,9,127,7],[137,10,127,8],[138,8,127,10,"alerts"],[138,14,127,16],[138,16,127,18],[138,17,127,19,"alert"],[138,22,127,24],[138,24,127,26],[138,27,127,29,"alerts"],[138,33,127,35],[139,6,127,37],[139,7,127,38],[139,8,127,39],[140,4,128,2],[140,5,128,3],[141,4,130,2,"updateAlertInList"],[141,21,130,19],[141,23,130,21,"updateAlertInList"],[141,24,130,22,"id"],[141,26,130,32],[141,28,130,34,"update"],[141,34,130,56],[141,39,130,67],[142,6,131,4],[142,12,131,10],[143,8,131,12,"alerts"],[143,14,131,18],[144,8,131,20,"selectedAlert"],[145,6,131,34],[145,7,131,35],[145,10,131,38,"get"],[145,13,131,41],[145,14,131,42],[145,15,131,43],[146,6,133,4],[146,12,133,10,"updatedAlerts"],[146,25,133,23],[146,28,133,26,"alerts"],[146,34,133,32],[146,35,133,33,"map"],[146,38,133,36],[146,39,133,38,"a"],[146,40,133,39],[146,44,134,6,"a"],[146,45,134,7],[146,46,134,8,"id"],[146,48,134,10],[146,53,134,15,"id"],[146,55,134,17],[146,58,134,20],[147,8,134,22],[147,11,134,25,"a"],[147,12,134,26],[148,8,134,28],[148,11,134,31,"update"],[149,6,134,38],[149,7,134,39],[149,10,134,42,"a"],[149,11,135,4],[149,12,135,5],[150,6,137,4],[150,12,137,10,"updatedSelected"],[150,27,137,25],[150,30,138,6,"selectedAlert"],[150,43,138,19],[150,45,138,21,"id"],[150,47,138,23],[150,52,138,28,"id"],[150,54,138,30],[150,57,138,33],[151,8,138,35],[151,11,138,38,"selectedAlert"],[151,24,138,51],[152,8,138,53],[152,11,138,56,"update"],[153,6,138,63],[153,7,138,64],[153,10,138,67,"selectedAlert"],[153,23,138,80],[154,6,140,4,"set"],[154,9,140,7],[154,10,140,8],[155,8,140,10,"alerts"],[155,14,140,16],[155,16,140,18,"updatedAlerts"],[155,29,140,31],[156,8,140,33,"selectedAlert"],[156,21,140,46],[156,23,140,48,"updatedSelected"],[157,6,140,64],[157,7,140,65],[157,8,140,66],[158,4,141,2],[158,5,141,3],[159,4,143,2,"setStatusFilter"],[159,19,143,17],[159,21,143,20,"status"],[159,27,143,47],[159,31,143,58],[160,6,144,4,"set"],[160,9,144,7],[160,10,144,8],[161,8,144,10,"statusFilter"],[161,20,144,22],[161,22,144,24,"status"],[162,6,144,31],[162,7,144,32],[162,8,144,33],[163,6,145,4,"get"],[163,9,145,7],[163,10,145,8],[163,11,145,9],[163,12,145,10,"fetchAlerts"],[163,23,145,21],[163,24,145,22],[163,25,145,23],[164,4,146,2],[164,5,146,3],[165,4,148,2,"clearError"],[165,14,148,12],[165,16,148,14,"clearError"],[165,17,148,14],[165,22,148,20,"set"],[165,25,148,23],[165,26,148,24],[166,6,148,26,"error"],[166,11,148,31],[166,13,148,33],[167,4,148,38],[167,5,148,39],[168,2,149,0],[168,3,149,1],[168,4,149,2],[168,5,149,3],[169,0,149,4],[169,3]],"functionMap":{"names":["<global>","create$argument_0","fetchAlerts","alerts.filter$argument_0","refreshAlerts","fetchAlertDetail","acknowledgeAlert","alerts.map$argument_0","addNewAlert","alerts.find$argument_0","updateAlertInList","setStatusFilter","clearError"],"mappings":"AAA;gDCyB;eCQ;QCiB,iDD;GDQ;iBGE;QDY,iDC;GHO;oBIE;GJS;oBKE;uCCO;sCDC;GLe;eOE;oBCM,wBD;GPI;qBSE;qCHG;2CGC;GTO;mBUE;GVG;cWE,0BX;EDC"},"hasCjsExports":false},"type":"js/module"}]}