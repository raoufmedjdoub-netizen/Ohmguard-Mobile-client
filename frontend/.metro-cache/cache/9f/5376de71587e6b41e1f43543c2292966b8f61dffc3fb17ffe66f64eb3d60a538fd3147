{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":67},"end":{"line":3,"column":56,"index":123}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"../services/socket","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":124},"end":{"line":4,"column":47,"index":171}}],"key":"Zr9DRnwDVZxHFeGDyPwyujLo6pk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _servicesApi = require(_dependencyMap[1], \"../services/api\");\n  var _servicesSocket = require(_dependencyMap[2], \"../services/socket\");\n  var socketService = _interopDefault(_servicesSocket);\n  const useAuthStore = (0, _zustand.create)((set, get) => ({\n    user: null,\n    isAuthenticated: false,\n    isInitializing: true,\n    isSubmitting: false,\n    error: null,\n    login: async (email, password) => {\n      set({\n        isSubmitting: true,\n        error: null\n      });\n      try {\n        await _servicesApi.authApi.login({\n          email,\n          password\n        });\n        const user = await _servicesApi.authApi.getCurrentUser();\n\n        // Connect to WebSocket\n        const token = await _servicesApi.tokenManager.getAccessToken();\n        if (user.tenant_id && token) {\n          socketService.default.connect(user.tenant_id, token);\n        }\n        set({\n          user,\n          isAuthenticated: true,\n          isSubmitting: false\n        });\n        return true;\n      } catch (error) {\n        const message = error.response?.data?.detail || 'Erreur de connexion';\n        set({\n          error: message,\n          isSubmitting: false\n        });\n        return false;\n      }\n    },\n    logout: async () => {\n      socketService.default.disconnect();\n      await _servicesApi.authApi.logout();\n      set({\n        user: null,\n        isAuthenticated: false,\n        error: null\n      });\n    },\n    checkAuth: async () => {\n      set({\n        isInitializing: true\n      });\n      try {\n        const token = await _servicesApi.tokenManager.getAccessToken();\n        if (!token) {\n          set({\n            isInitializing: false,\n            isAuthenticated: false\n          });\n          return false;\n        }\n        const user = await _servicesApi.authApi.getCurrentUser();\n\n        // Connect to WebSocket\n        if (user.tenant_id) {\n          socketService.default.connect(user.tenant_id, token);\n        }\n        set({\n          user,\n          isAuthenticated: true,\n          isInitializing: false\n        });\n        return true;\n      } catch (error) {\n        await _servicesApi.tokenManager.clearTokens();\n        set({\n          user: null,\n          isAuthenticated: false,\n          isInitializing: false\n        });\n        return false;\n      }\n    },\n    clearError: () => set({\n      error: null\n    })\n  }));\n});","lineCount":108,"map":[[12,2,20,0,"Object"],[12,8,20,0],[12,9,20,0,"defineProperty"],[12,23,20,0],[12,24,20,0,"exports"],[12,31,20,0],[13,4,20,0,"enumerable"],[13,14,20,0],[14,4,20,0,"get"],[14,7,20,0],[14,18,20,0,"get"],[14,19,20,0],[15,6,20,0],[15,13,20,0,"useAuthStore"],[15,25,20,0],[16,4,20,0],[17,2,20,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,3,0],[19,6,3,0,"_servicesApi"],[19,18,3,0],[19,21,3,0,"require"],[19,28,3,0],[19,29,3,0,"_dependencyMap"],[19,43,3,0],[20,2,4,0],[20,6,4,0,"_servicesSocket"],[20,21,4,0],[20,24,4,0,"require"],[20,31,4,0],[20,32,4,0,"_dependencyMap"],[20,46,4,0],[21,2,4,0],[21,6,4,0,"socketService"],[21,19,4,0],[21,22,4,0,"_interopDefault"],[21,37,4,0],[21,38,4,0,"_servicesSocket"],[21,53,4,0],[22,2,20,7],[22,8,20,13,"useAuthStore"],[22,20,20,25],[22,23,20,28],[22,27,20,28,"create"],[22,35,20,34],[22,36,20,34,"create"],[22,42,20,34],[22,44,20,46],[22,45,20,47,"set"],[22,48,20,50],[22,50,20,52,"get"],[22,53,20,55],[22,59,20,61],[23,4,21,2,"user"],[23,8,21,6],[23,10,21,8],[23,14,21,12],[24,4,22,2,"isAuthenticated"],[24,19,22,17],[24,21,22,19],[24,26,22,24],[25,4,23,2,"isInitializing"],[25,18,23,16],[25,20,23,18],[25,24,23,22],[26,4,24,2,"isSubmitting"],[26,16,24,14],[26,18,24,16],[26,23,24,21],[27,4,25,2,"error"],[27,9,25,7],[27,11,25,9],[27,15,25,13],[28,4,27,2,"login"],[28,9,27,7],[28,11,27,9],[28,17,27,9,"login"],[28,18,27,16,"email"],[28,23,27,29],[28,25,27,31,"password"],[28,33,27,47],[28,38,27,70],[29,6,28,4,"set"],[29,9,28,7],[29,10,28,8],[30,8,28,10,"isSubmitting"],[30,20,28,22],[30,22,28,24],[30,26,28,28],[31,8,28,30,"error"],[31,13,28,35],[31,15,28,37],[32,6,28,42],[32,7,28,43],[32,8,28,44],[33,6,29,4],[33,10,29,8],[34,8,30,6],[34,14,30,12,"authApi"],[34,26,30,19],[34,27,30,19,"authApi"],[34,34,30,19],[34,35,30,20,"login"],[34,40,30,25],[34,41,30,26],[35,10,30,28,"email"],[35,15,30,33],[36,10,30,35,"password"],[37,8,30,44],[37,9,30,45],[37,10,30,46],[38,8,31,6],[38,14,31,12,"user"],[38,18,31,16],[38,21,31,19],[38,27,31,25,"authApi"],[38,39,31,32],[38,40,31,32,"authApi"],[38,47,31,32],[38,48,31,33,"getCurrentUser"],[38,62,31,47],[38,63,31,48],[38,64,31,49],[40,8,33,6],[41,8,34,6],[41,14,34,12,"token"],[41,19,34,17],[41,22,34,20],[41,28,34,26,"tokenManager"],[41,40,34,38],[41,41,34,38,"tokenManager"],[41,53,34,38],[41,54,34,39,"getAccessToken"],[41,68,34,53],[41,69,34,54],[41,70,34,55],[42,8,35,6],[42,12,35,10,"user"],[42,16,35,14],[42,17,35,15,"tenant_id"],[42,26,35,24],[42,30,35,28,"token"],[42,35,35,33],[42,37,35,35],[43,10,36,8,"socketService"],[43,23,36,21],[43,24,36,21,"default"],[43,31,36,21],[43,32,36,22,"connect"],[43,39,36,29],[43,40,36,30,"user"],[43,44,36,34],[43,45,36,35,"tenant_id"],[43,54,36,44],[43,56,36,46,"token"],[43,61,36,51],[43,62,36,52],[44,8,37,6],[45,8,39,6,"set"],[45,11,39,9],[45,12,39,10],[46,10,39,12,"user"],[46,14,39,16],[47,10,39,18,"isAuthenticated"],[47,25,39,33],[47,27,39,35],[47,31,39,39],[48,10,39,41,"isSubmitting"],[48,22,39,53],[48,24,39,55],[49,8,39,61],[49,9,39,62],[49,10,39,63],[50,8,40,6],[50,15,40,13],[50,19,40,17],[51,6,41,4],[51,7,41,5],[51,8,41,6],[51,15,41,13,"error"],[51,20,41,23],[51,22,41,25],[52,8,42,6],[52,14,42,12,"message"],[52,21,42,19],[52,24,42,22,"error"],[52,29,42,27],[52,30,42,28,"response"],[52,38,42,36],[52,40,42,38,"data"],[52,44,42,42],[52,46,42,44,"detail"],[52,52,42,50],[52,56,42,54],[52,77,42,75],[53,8,43,6,"set"],[53,11,43,9],[53,12,43,10],[54,10,43,12,"error"],[54,15,43,17],[54,17,43,19,"message"],[54,24,43,26],[55,10,43,28,"isSubmitting"],[55,22,43,40],[55,24,43,42],[56,8,43,48],[56,9,43,49],[56,10,43,50],[57,8,44,6],[57,15,44,13],[57,20,44,18],[58,6,45,4],[59,4,46,2],[59,5,46,3],[60,4,48,2,"logout"],[60,10,48,8],[60,12,48,10],[60,18,48,10,"logout"],[60,19,48,10],[60,24,48,37],[61,6,49,4,"socketService"],[61,19,49,17],[61,20,49,17,"default"],[61,27,49,17],[61,28,49,18,"disconnect"],[61,38,49,28],[61,39,49,29],[61,40,49,30],[62,6,50,4],[62,12,50,10,"authApi"],[62,24,50,17],[62,25,50,17,"authApi"],[62,32,50,17],[62,33,50,18,"logout"],[62,39,50,24],[62,40,50,25],[62,41,50,26],[63,6,51,4,"set"],[63,9,51,7],[63,10,51,8],[64,8,51,10,"user"],[64,12,51,14],[64,14,51,16],[64,18,51,20],[65,8,51,22,"isAuthenticated"],[65,23,51,37],[65,25,51,39],[65,30,51,44],[66,8,51,46,"error"],[66,13,51,51],[66,15,51,53],[67,6,51,58],[67,7,51,59],[67,8,51,60],[68,4,52,2],[68,5,52,3],[69,4,54,2,"checkAuth"],[69,13,54,11],[69,15,54,13],[69,21,54,13,"checkAuth"],[69,22,54,13],[69,27,54,43],[70,6,55,4,"set"],[70,9,55,7],[70,10,55,8],[71,8,55,10,"isInitializing"],[71,22,55,24],[71,24,55,26],[72,6,55,31],[72,7,55,32],[72,8,55,33],[73,6,56,4],[73,10,56,8],[74,8,57,6],[74,14,57,12,"token"],[74,19,57,17],[74,22,57,20],[74,28,57,26,"tokenManager"],[74,40,57,38],[74,41,57,38,"tokenManager"],[74,53,57,38],[74,54,57,39,"getAccessToken"],[74,68,57,53],[74,69,57,54],[74,70,57,55],[75,8,58,6],[75,12,58,10],[75,13,58,11,"token"],[75,18,58,16],[75,20,58,18],[76,10,59,8,"set"],[76,13,59,11],[76,14,59,12],[77,12,59,14,"isInitializing"],[77,26,59,28],[77,28,59,30],[77,33,59,35],[78,12,59,37,"isAuthenticated"],[78,27,59,52],[78,29,59,54],[79,10,59,60],[79,11,59,61],[79,12,59,62],[80,10,60,8],[80,17,60,15],[80,22,60,20],[81,8,61,6],[82,8,63,6],[82,14,63,12,"user"],[82,18,63,16],[82,21,63,19],[82,27,63,25,"authApi"],[82,39,63,32],[82,40,63,32,"authApi"],[82,47,63,32],[82,48,63,33,"getCurrentUser"],[82,62,63,47],[82,63,63,48],[82,64,63,49],[84,8,65,6],[85,8,66,6],[85,12,66,10,"user"],[85,16,66,14],[85,17,66,15,"tenant_id"],[85,26,66,24],[85,28,66,26],[86,10,67,8,"socketService"],[86,23,67,21],[86,24,67,21,"default"],[86,31,67,21],[86,32,67,22,"connect"],[86,39,67,29],[86,40,67,30,"user"],[86,44,67,34],[86,45,67,35,"tenant_id"],[86,54,67,44],[86,56,67,46,"token"],[86,61,67,51],[86,62,67,52],[87,8,68,6],[88,8,70,6,"set"],[88,11,70,9],[88,12,70,10],[89,10,70,12,"user"],[89,14,70,16],[90,10,70,18,"isAuthenticated"],[90,25,70,33],[90,27,70,35],[90,31,70,39],[91,10,70,41,"isInitializing"],[91,24,70,55],[91,26,70,57],[92,8,70,63],[92,9,70,64],[92,10,70,65],[93,8,71,6],[93,15,71,13],[93,19,71,17],[94,6,72,4],[94,7,72,5],[94,8,72,6],[94,15,72,13,"error"],[94,20,72,18],[94,22,72,20],[95,8,73,6],[95,14,73,12,"tokenManager"],[95,26,73,24],[95,27,73,24,"tokenManager"],[95,39,73,24],[95,40,73,25,"clearTokens"],[95,51,73,36],[95,52,73,37],[95,53,73,38],[96,8,74,6,"set"],[96,11,74,9],[96,12,74,10],[97,10,74,12,"user"],[97,14,74,16],[97,16,74,18],[97,20,74,22],[98,10,74,24,"isAuthenticated"],[98,25,74,39],[98,27,74,41],[98,32,74,46],[99,10,74,48,"isInitializing"],[99,24,74,62],[99,26,74,64],[100,8,74,70],[100,9,74,71],[100,10,74,72],[101,8,75,6],[101,15,75,13],[101,20,75,18],[102,6,76,4],[103,4,77,2],[103,5,77,3],[104,4,79,2,"clearError"],[104,14,79,12],[104,16,79,14,"clearError"],[104,17,79,14],[104,22,79,20,"set"],[104,25,79,23],[104,26,79,24],[105,6,79,26,"error"],[105,11,79,31],[105,13,79,33],[106,4,79,38],[106,5,79,39],[107,2,80,0],[107,3,80,1],[107,4,80,2],[107,5,80,3],[108,0,80,4],[108,3]],"functionMap":{"names":["<global>","create$argument_0","login","logout","checkAuth","clearError"],"mappings":"AAA;8CCmB;SCO;GDmB;UEE;GFI;aGE;GHuB;cIE,0BJ;EDC"},"hasCjsExports":false},"type":"js/module"}]}